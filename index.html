<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="X-UA-Compatible" content="text/html; charset=UTF-8" />
		<title>Jquery-idleTimeout - Demo Page - by JillElaine</title>

		<link type="text/css" rel="stylesheet" href="stylesheets/main.css"/>
		<link type="text/css" rel="stylesheet" href="stylesheets/jquery-ui-1.8.21.custom.css"/>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
		<script src="https://raw.githubusercontent.com/marcuswestin/store.js/master/store.min.js" type="text/javascript"></script>
		<script src="https://raw.githubusercontent.com/JillElaine/jquery-idleTimeout/master/jquery-idleTimeout.min.js" type="text/javascript"></script>

		<script type="text/javascript" charset="utf-8">

		  var eventList = 'click keypress scroll wheel mousewheel'; // separate each event with a space

      var voluntaryLogoutAll = function() {
        if (store.enabled) {
          store.set('idleTimerLoggedOut', true);
          voluntaryLogoutOne();
        } else {
          alert('Dependent file missing. Please see: https://github.com/marcuswestin/store.js');
        }
      }

      var voluntaryLogoutOne = function() {
        window.location.href = "https://github.com/JillElaine/jquery-idleTimeout";
      }

      $(document).ready(function(){

        $(document).idleTimeout({
          idleTimeLimit: 15000,         // 15 seconds
          dialogDisplayLimit: 30000,   // Time to display the warning dialog before redirect (and optional callback) in milliseconds
          redirectUrl: 'https://github.com/JillElaine/jquery-idleTimeout',       // redirect to this url
          activityEvents: eventList, // separate each event with a space
          sessionKeepAliveTimer: false, // Set to false to disable pings.
        });

        $('body').on(eventList, function(event) {
          $('#activity').effect('shake');
        });
      });
		</script>
	</head>

	<body>
    <div>
      <div class="main_banner">
        <h1>Jquery-idleTimeout - Demo Page - by JillElaine</h1>
      </div>

      <div class="main_content">

        <h2>GitHub Project Page - <a href="https://github.com/JillElaine/jquery-idleTimeout">https://github.com/JillElaine/jquery-idleTimeout</a></h2>

        <p>To see the 'idle timeout' functionality, do not press any keys, click your mouse or scroll your mousewheel for 15 seconds.</p>

        <h3>Functions across multiple windows and tabs within the same domain</h3>

        <h4><a href="http://jillelaine.github.io/jquery-idleTimeout/index.html" target="_blank">Try it! Click here to open another browser window/tab of this page.</a></h4>

        <ul>
          <li>If a window/tab is logged out, all other windows/tabs will log out too.</li>
          <li>If warning dialog appears on one window/tab, a warning dialog appears on all other 'same domain' windows/tabs too.</li>
          <li>If 'Stay Logged In' button on warning dialog is clicked, warning dialogs on all 'same domain' windows/tabs will be dismissed too.</li>
          <li>If 'Log Out Now' button on warning dialog is clicked, all 'same domain' windows/tabs will log out too.</li>
        </ul>

        <h3>Requirements</h3>
        <ul>
          <li>Marcus Westin's store.js version 1.3.4+ is required. <a href="https://github.com/marcuswestin/store.js" target="_blank">https://github.com/marcuswestin/store.js</a></li>
          <li>JQuery version 1.7+ and JQuery UI are required. You can load Google's JQuery API. Put these statements in your page's 'head' section.</li>
            <ul>
              <li>&lt;script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"&gt;&lt;/script&gt;</li>
              <li>&lt;script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"&gt;&lt;/script&gt;</li>
            </ul>
        </ul>

        <h3>Activity Detector</h3>
        <div id="activity" style="background-color:yellow;border:solid 1px black;width: 50%"><h4>Activity Detected!</h4></div>

        <h3>Functionality & Features</h3>
        <ul>
          <li>Works across multiple windows and tabs within the same domain <strong>thanks to Marcus Westin's store.js.</strong></li>
            <ul>
              <li>Uses localStorage, globalStorage and userData behavior to 'communicate' across multiple browser windows/tabs without cookies or flash!</li>
            </ul>
          <li>If no activity events are detected on any 'same domain' windows/tabs within the 'idleTimeLimit', the warning dialog will appear will appear on all 'same domain' windows/tabs.</li>
            <ul>
              <li>Activity events to detect are configurable: clicks, keypresses, scrolls, and/or mouse movements are options.</li>
              <li><a href="http://www.quirksmode.org/dom/events/" target="_blank">http://www.quirksmode.org/dom/events/</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference/Events" target="_blank">https://developer.mozilla.org/en-US/docs/Web/Reference/Events</a></li>
            </ul>
          <li><strong>The browser title changes on all 'same domain' windows/tabs when the warning dialog appears, and reverts back to the original title(s) if the warning dialog is dismissed.</strong></li>
          <li>Includes 'time remaining to logout' countdown timer on warning dialog</li>
          <li>If neither button on the warning dialog box is clicked within the 'dialogDisplayLimit', all 'same domain' windows/tabs will redirect to the 'redirectUrl'.</li>
        </ul>

        <h3>Voluntary Logout - Optional Functionality</h3>

        <div>
          <input type="button" value="Logout All Windows/Tabs" onclick="voluntaryLogoutAll()" title="This button will logout ALL 'same domain' Windows/Tabs"
            class="button logoutall float_left" id="logoutAll">
          &nbsp;&nbsp;&nbsp;&nbsp;
          <input type="button" value="Logout Only This Window/Tab" onclick="voluntaryLogoutOne()" title="This button will logout only the current Window/Tab"
            class="button logoutone float_left" id="logoutOne">
        </div>

        <p>If user voluntarily logs out of your site with your 'Logout' button (instead of timing out),
        you can force all 'same domain' windows/tabs to also log out too!
        Add a small snippet of javascript to the 'onclick' function of your 'Logout' button.</p>

        <h4><a href="http://jillelaine.github.io/jquery-idleTimeout/index.html" target="_blank">
          Try it! Click here to open another browser window/tab of this page and then try the two 'Logout' buttons above.
        </a></h4>

        <p><strong>Optional 'Voluntary Logout' Script</strong></p>
        <p>
          &lt;script type="text/javascript"&gt;
            <br />&nbsp;&nbsp;$(document).ready(function(){
              <br />&nbsp;&nbsp;&nbsp;&nbsp;if (store.enabled) {
                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store.set('idleTimerLoggedOut', true);
                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.location.href = "https://github.com/JillElaine/jquery-idleTimeout";
              <br />&nbsp;&nbsp;&nbsp;&nbsp;} else {
                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert('Dependent file missing. Please see: https://github.com/marcuswestin/store.js');
              <br />&nbsp;&nbsp;&nbsp;&nbsp;}
            <br />&nbsp;&nbsp;});
          <br />&lt;/script&gt;
        </p>

        <h3>The Demo Runtime Configuration</h3>
        <ul>
          <li>The idle time limit, 'idleTimeLimit', is set to 15 seconds (15000 milliseconds).</li>
          <li>Activity events to detect, 'activityEvents', are set to 'click keypress scroll wheel mousewheel'.</li>
          <li>The warning dialog display limit, 'dialogDisplayLimit', is set to 30 seconds.</li>
          <li>The redirect page, 'redirectUrl', is set to https://github.com/JillElaine/jquery-idleTimeout.</li>
          <li>Session keep alive pings have been disabled.</li>
        </ul>

        <h3>The Demo Runtime Configuration Script</h3>
        <p>
          &lt;script type="text/javascript" charset="utf-8"&gt;
          <br />&nbsp;&nbsp;$(document).ready(function(){
            <br />&nbsp;&nbsp;&nbsp;&nbsp;$(document).idleTimeout({
              <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idleTimeLimit: 15000,         // 15 seconds
              <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dialogDisplayLimit: 30000,   // Time to display the warning dialog before redirect (and optional callback) in milliseconds. 30000 = 30 seconds, 180000 = 3 Minutes
              <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirectUrl: 'https://github.com/JillElaine/jquery-idleTimeout',       // redirect to this url
              <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activityEvents: 'click keypress scroll wheel mousewheel', // separate each event with a space
              <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sessionKeepAliveTimer: false, // Set to false to disable pings.
            <br />&nbsp;&nbsp;&nbsp;&nbsp;});
          <br />&nbsp;&nbsp;});
        <br />&lt;/script&gt;
       </p>

      </div>
    </div>
	</body>
</html>